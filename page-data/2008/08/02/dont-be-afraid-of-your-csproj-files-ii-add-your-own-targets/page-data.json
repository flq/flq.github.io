{
    "componentChunkName": "component---src-templates-article-template-js",
    "path": "/2008/08/02/dont-be-afraid-of-your-csproj-files-ii-add-your-own-targets",
    "result": {"data":{"mdx":{"excerpt":"In my  first post  on csproj-fun I had an example where after every build, the resulting assemblies lying in e.g. bin/debug would be merged into oneâ€¦","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Don't be afraid of your csproj-Files (II): Add Your own Targets\",\n  \"layout\": \"post\",\n  \"tags\": [\"dotnet\", \"msbuild\", \"tools\"],\n  \"date\": \"2008-08-01T22:03:26.000Z\",\n  \"redirect_from\": \"/go/129/\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In my \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://realfiction.net/go/162\"\n  }, \"first post\"), \" on csproj-fun I had an example where after every build, the resulting assemblies lying in e.g. bin/debug would be merged into one and copied out to some other place. Maybe you do not want this every time you rebuild your project, but you'd rather want to trigger it at will.\"), mdx(\"p\", null, \"The only thing you need to do is to place the tasks in the AfterBuild target into some different target, like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"xml\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-xml\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-xml\"\n  }, \"  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"Target\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"Name\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"Merge\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"[DependsOnTarget\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"Build\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\")), \"\\n    ...\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"<\"), \"ILMerge\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"InputAssemblies\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-value\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation attr-equals\"\n  }, \"=\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\"), \"@(DllOutput)\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"\\\"\")), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token attr-name\"\n  }, \"...\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"/>\")), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token tag\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"</\"), \"Target\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \">\"))))), mdx(\"p\", null, \"This target will now reside in your csproj file, and indeed Visual Studio would merely change the location within the file, if anything. The Visual Studio compile run will not bother with your Target. No build-relevant task depends on it. If you wish, you can make your new Target depend on the build. That way your project will be built before your target is executed.\"), mdx(\"p\", null, \"Question is, how can you put your new target to use?\"), mdx(\"p\", null, \"Sadly, Visual Studio has no direct support of Targets defined in a csproj that are not connected to the build process.\\nWhat you can do is to use the VS200x command prompt, go to the folder that contains the csproj file and type\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"msbuild /t:Merge\"))), mdx(\"p\", null, \"Not too bad, but still somewhat clumsy. A more comfortable and integrated way to call your target is to do the following:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Under Visual Studio/Tools choose \\\"External Tools...\\\"\\n\", mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/assets/menumsbuild.png\",\n    \"alt\": null\n  }))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Press Add and fill out the dialog as shown in this screenshot:\\n\", mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/assets/addmsbuild.png\",\n    \"alt\": null\n  }), \"\\nNote that msbuild is found in any framework directory. Also note that the used variable will become the directory of the project currently selected in the solution explorer.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now your newly created command will appear in the Tools Menu. By selecting your new command, the following dialog appears:\\n\", mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/assets/usemsbuild.png\",\n    \"alt\": null\n  }), \"\\nHere you can type your arguments, i.e. calling a specific target. The checkbox we chose to see the output gives us a nice output in the corresponding Visual Studio window.\\nJust as a reminder, you can parameterize your MSBuild task. You can then pass parameters through the command line arguments as such:\"))), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"/p:Var1=AAA;Var2=BBB \"))), mdx(\"p\", null, \"Admittedly, I would prefer a solution that is part of Visual Studio. I would like to right-click on a project file in the solution explorer and enter the submenu \\\"Targets\\\" (which only exists if there are custom targets in the csproj file) and choose \\\"Merge\\\" in this case.\"), mdx(\"p\", null, \"However, this works fairly well and allows me to zip, merge, generate and do all things MSBuild does from custom tasks safely tucked into my csproj file.\"), mdx(\"p\", null, \"btw, don't forget to document your additions! You may forget the target name...\"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"slug":"/2008/08/02/dont-be-afraid-of-your-csproj-files-ii-add-your-own-targets"},"frontmatter":{"date":"2008-08-01","path":null,"title":"Don't be afraid of your csproj-Files (II): Add Your own Targets","tags":["dotnet","msbuild","tools"]}}},"pageContext":{"title":"Don't be afraid of your csproj-Files (II): Add Your own Targets","previous":{"fields":{"slug":"/2008/07/31/dont-be-afraid-of-your-csproj-files-i-embracing-the-idea","published":true},"frontmatter":{"title":"Don't be afraid of your csproj-Files (I): Embracing the idea","tags":["software-development","msbuild"],"date":"2008/07/30"}},"next":{"fields":{"slug":"/2008/08/16/dont-be-afraid-of-your-csproj-files-iii-we-have-a-condition","published":true},"frontmatter":{"title":"Don't be afraid of your csproj-Files (III): We have a condition","tags":["dotnet","msbuild","tools"],"date":"2008/08/16"}}}},
    "staticQueryHashes": ["256249292","2581731408"]}