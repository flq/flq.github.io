{"componentChunkName":"component---src-templates-article-template-js","path":"/2010/03/08/introducing-the-realfiction-builder-msbuild-without-xml","result":{"data":{"markdownRemark":{"html":"<p>I have previously <a href=\"/go/144\">talked about</a> using rake for building .NET apps. While I do like ruby, I’m not a big fan of the whole idea. It takes time to set up the correct environment, problems no .NET developer is aware of lurk around corners. If you want to learn ruby, that’s fine. But do you want to learn a language just to get some build scripts going?</p>\n<p>On the other hand I can understand if you can’t stand XML anymore. I’d go as far as saying that you need to have loved something to truly hate it. Which is why I kicked off <strong>rfb</strong>. The <em>realfiction builder</em> parses a syntax that is much lighter on the eye, but nonetheless gives you access to the MsBuild capabilities (well, currently not all, but it does run the <a href=\"http://github.com/flq/Rf.Sites/blob/master/build.rfb\">Rf.Sites build script</a>). Follow the link. The syntax is fairly self-explanatory. Nonetheless here a small introduction:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">Project <span class=\"token string\">\"Default\"</span>\n  UsingTask <span class=\"token operator\">-</span>TaskName:ATask <span class=\"token operator\">-</span>AssemblyFile:lib<span class=\"token operator\">/</span>SomeAssembly<span class=\"token punctuation\">.</span>dll\n  <span class=\"token operator\">/</span><span class=\"token operator\">/</span> This variable controls the forces of evil\n  <span class=\"token variable\">$Foo</span> = Bar Baz\n  Target <span class=\"token string\">\"Default\"</span> <span class=\"token operator\">-</span>Depends:Deps\n    <span class=\"token operator\">/</span><span class=\"token operator\">/</span> This one a <span class=\"token function\">dir</span> will be made of<span class=\"token punctuation\">.</span>\n    <span class=\"token variable\">$bar</span> = Bang Bop\n    @stuff = $<span class=\"token punctuation\">(</span>iisOutDir<span class=\"token punctuation\">)</span>\\<span class=\"token operator\">*</span><span class=\"token operator\">*</span>\\<span class=\"token operator\">*</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span>\n    MakeDir <span class=\"token string\">\"This_<span class=\"token function\">$<span class=\"token punctuation\">(</span>bar<span class=\"token punctuation\">)</span></span>.plonk\"</span></code></pre></div>\n<p>This is the same as:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-16\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Project</span> <span class=\"token attr-name\">DefaultTargets</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Default<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.microsoft.com/developer/msbuild/2003<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>PropertyGroup</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Foo</span><span class=\"token punctuation\">></span></span>Bar Baz<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Foo</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>PropertyGroup</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>UsingTask</span> <span class=\"token attr-name\">TaskName</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ATask<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">AssemblyFile</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>lib/SomeAssembly.dll<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Target</span> <span class=\"token attr-name\">Name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Default<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">DependsOnTargets</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Deps<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CreateProperty</span> <span class=\"token attr-name\">Value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Bang Bop<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Output</span> <span class=\"token attr-name\">TaskParameter</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Value<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">PropertyName</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>CreateProperty</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>CreateItem</span> <span class=\"token attr-name\">Include</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>$(iisOutDir)\\**\\*.*<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Output</span> <span class=\"token attr-name\">TaskParameter</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Include<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ItemName</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stuff<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>CreateItem</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>MakeDir</span> <span class=\"token attr-name\">Directories</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>This_$(bar).plonk<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Target</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Project</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h4>Let me ask you. Which one is easier to read? Which one is easier to write?</h4>\n<p>A few words about the syntax:</p>\n<ul>\n<li>Scoping is done essentially Python-like, by indenting. </li>\n<li>Properties and Item Groups are specified as shown, inside or outside of targets. </li>\n<li>A target/task is usually constructed as a Word followed by options (words preceded by a hyphen ‘-‘). Those options may be on the same line or the following lines. The syntax is <em>–option:value</em>. It maps to arguments of e.g. some task. </li>\n<li>There may be a default option, which can be specified by putting it in quotes. The Target’s default option is ‘Name’, while MakeDir’s default option is ‘Directories’. The default options currently supported are found in <a href=\"http://github.com/flq/rfb/blob/master/rfb/StandardDefaultValueResolver.cs\">this file</a>.</li>\n</ul>\n<p>A first version to play with is <a href=\"http://github.com/flq/rfb\">available here</a>. The whole thing compiles into an exe of 37 KB (Compare to my roughly 40MB of my current ruby installation). A lot of stuff is still missing, but if there’s interest out there, I’ll keep adding to it.</p>\n<h3>Update</h3>\n<p>The currently supported syntax will be <a href=\"http://wiki.github.com/flq/rfb/syntax\">documented here</a>.</p>","fields":{"slug":"/2010/03/08/introducing-the-realfiction-builder-msbuild-without-xml"},"frontmatter":{"date":"March 08, 2010","path":null,"title":"Introducing the realfiction builder...MsBuild without XML","tags":["own-software","software-development","msbuild"]}}},"pageContext":{"title":"Introducing the realfiction builder...MsBuild without XML","previous":{"fields":{"slug":"/2010/03/04/who-would-have-thought-that-i","published":true},"frontmatter":{"title":"Who would have thought that...(I)","tags":["javascript"],"date":"2010/03/04"}},"next":{"fields":{"slug":"/2010/03/08/introducing-the-realfiction-builder-msbuild-without-xml","published":true},"frontmatter":{"title":"Introducing the realfiction builder...MsBuild without XML","tags":["own-software","software-development","msbuild"],"date":"2010/03/08"}}}}}