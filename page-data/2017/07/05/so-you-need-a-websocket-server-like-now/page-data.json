{"componentChunkName":"component---src-templates-article-template-js","path":"/2017/07/05/so-you-need-a-websocket-server-like-now","result":{"data":{"mdx":{"excerpt":"So, you need a websocket server, like, now. Well, fear no more, here comes  websocketd  to the rescue! As it says WebSockets the UNIX way\n  Fullâ€¦","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"So you need a websocket server, like, now\",\n  \"layout\": \"post\",\n  \"tags\": [\"programming\", \"web\"],\n  \"date\": \"2017-07-05T10:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"So, you need a websocket server, like, now. Well, fear no more, here comes \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", {\n    parentName: \"strong\",\n    \"href\": \"http://websocketd.com/\"\n  }, \"websocketd\")), \" to the rescue!\"), mdx(\"p\", null, \"As it says\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"WebSockets the UNIX way\\nFull duplex messaging between web browsers and servers\")), mdx(\"p\", null, \"And it's awfully simple to use. STDIN becomes your input, STDOUT is your output. In other words, any old console application can become a Websocket server.\"), mdx(\"p\", null, \"I did my testing on the Windows Linux Subsystem (WLS). Just download the correct zip\\nfrom the website (Note that you also get the executable for Windows, but for WLS you need the 64-bit Linux variant).\"), mdx(\"p\", null, \"Then I did\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"bash\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"sudo-apt-get \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"install\"), \" fortune cowsay\"))), mdx(\"p\", null, \"and adapted the example bash script from the websocketd website a little bit:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"bash\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token shebang important\"\n  }, \"#!/bin/bash\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"for\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token variable\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"((\"), \"COUNT \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token number\"\n  }, \"1\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \" COUNT \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \"<=\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token number\"\n  }, \"10\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \" COUNT\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \"++\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"))\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"do\"), \"\\n  fortune \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"|\"), \" cowsay\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"sleep\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"2\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"done\")))), mdx(\"p\", null, \"Just note that if you use an editor in Windows, you will have to make sure that your line endings are UNIX-style (in Sublime e.g. \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"View->Line Endings->Unix\"), \").\"), mdx(\"p\", null, \"Finally, write a little test website. Mine got a little more code, I'll tell you in a minute\"), mdx(\"p\", null, \"{% gist flq/642eb18a1b205eccf64a62837c0b7fa4 test.html %}\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"gather\"), \" function collects the output from the socket server - this is because \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"websocketd\"), \" sends and separates on newlines. Therefore every cow becomes a number of messages sent to the browser. Finally \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"append\"), \" writes out a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"<pre>\"), \" block.\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/assets/cowsay_websocketd.png\",\n    \"alt\": null\n  })), mdx(\"p\", null, \"What is presented as a bit of a joke nonetheless means that you can set up a websocket server \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"veeery\"), \" quickly. Bear in mind that each connection spawns a process. That is, you have straightforward isolation, but this approach may not exactly scale to the millions of connections.\"), mdx(\"h2\", null, \"PS\"), mdx(\"p\", null, \"If you try this out on MS Edge, it will not work OOTB connecting to localhost. \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stackoverflow.com/a/32767256/51428\"\n  }, \"This answer on SO\"), \" helped me out.\"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"slug":"/2017/07/05/so-you-need-a-websocket-server-like-now"},"frontmatter":{"date":"2017-07-05","path":null,"title":"So you need a websocket server, like, now","tags":["programming","web"]}}},"pageContext":{"title":"So you need a websocket server, like, now","previous":{"fields":{"slug":"/2017/07/02/amazing-morse-writing","published":true},"frontmatter":{"title":"Amazing morse writing","tags":["loosely-coupled"],"date":"2017/07/02"}},"next":{"fields":{"slug":"/2017/07/21/getting-into-react-part-1","published":true},"frontmatter":{"title":"Getting into React Part 1","tags":["programming","web","react","javascript"],"date":"2017/07/21"}}}},"staticQueryHashes":["256249292","2581731408"]}