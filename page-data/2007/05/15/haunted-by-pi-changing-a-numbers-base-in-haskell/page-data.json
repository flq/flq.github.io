{"componentChunkName":"component---src-templates-article-template-js","path":"/2007/05/15/haunted-by-pi-changing-a-numbers-base-in-haskell","result":{"data":{"mdx":{"excerpt":"I was looking back at  Christoph's ruby code  and was thinking that by now I should be able to implement that algorithm in Haskell. Indeed, one of myâ€¦","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Haunted by PI - changing a number's base in Haskell\",\n  \"layout\": \"post\",\n  \"tags\": [\"software-development\", \"geekdom\", \"mathematics\", \"haskell\"],\n  \"date\": \"2007-05-15T21:15:28.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I was looking back at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/go/113\"\n  }, \"Christoph's ruby code\"), \" and was thinking that by now I should be able to implement that algorithm in Haskell. Indeed, one of my solutions looks like that:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"haskell\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-haskell\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-haskell\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"out\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"x\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"|\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"x\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \">=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"base\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"foldl\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"++\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"$\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"map\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"\\\\\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"f\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"->\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"out\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"$\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"f\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"x\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"base\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"mod\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"div\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"|\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"x\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"<\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"base\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"digit\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"where\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"range\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token char string\"\n  }, \"'a'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"..\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token char string\"\n  }, \"'z'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"digit\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"range\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"!!\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"fromIntegral\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"x\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token hvariable\"\n  }, \"base\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"fromIntegral\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"$\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"length\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token builtin\"\n  }, \"range\")))), mdx(\"p\", null, \"The digit to be output is a letter of the alphabet, so we are changing PI to a base 26 number system. Let's check it briefly: The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"map\"), \" function maps one array to another. In this case the array consists of two functions, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"mod\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"div\"), \". mod returns the remainder of a division while div returns how often the divisor fits in the dividend.\"), mdx(\"p\", null, \"In other words, the right-hand side of the dollar-sign (which is a symbol in Haskell to influence the binding power of functions and often simply aids in removing the need to put an expression in brackets) returns an array like \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"[out(mod x base),out(div x base)]\"), \". \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"foldl\"), \" then gobbles it all up coming from the left. It kicks off with an empty array ([]), takes the first element and concatenates it (++) to said array, then takes the second element in the array and (++) it to what it already has, and...you get it. Btw, !! is the indexer operation to an array \", \"[1,2]\", \"!!1 gives us 2.\"), mdx(\"p\", null, \"You may be wondering about two things:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"What is this \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"fromIntegral\"), \" stuff?\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Isn't the number that comes out backwards?\")), mdx(\"p\", null, \"To the first: fromIntegral's type is\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"Main> :t fromIntegral\\nfromIntegral :: (Num b, Integral a) => a -> b\"))), mdx(\"p\", null, \"It's input is therefore an Integral. An integral, on the other hand, is an integer with \\\"infinite\\\" length. Yeah! I finally stumbled across a language that can do looong integers out-of-the-box.\"), mdx(\"p\", null, \"Hence, using fromIntegral in that context gives the following signature for the function:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"Main> :t out\\nout :: (Integral a) => a -> [Char]\"))), mdx(\"p\", null, \"It will get an arbitrary length integral and returns a String. Nice!\\nAs to the second point...Let's marry the whole thing with some IO:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"className\": \"language-text\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-text\"\n  }, \"main = do\\n  myPi <- readFile \\\"c:/pi/pismaller.txt\\\"\\n  writeFile \\\"c:/pi/tmp.txt\\\" (out $ read myPi)\\n  piBackwards <- readFile \\\"c:/pi/tmp.txt\\\"\\n  writeFile \\\"c:/pi/output.txt\\\" (reverse piBackwards)\"))), mdx(\"p\", null, \"The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"out\"), \" looks a bit lost there, but it does its job. You can see that at the end I turn around the string. Indeed, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"out\"), \" spills out the rebased Pi backwards. Why? Well, the calculations for the last digits are finished first and so could in theory already be written out to the file. And you know what? That's just what Haskell does! Yeah, I know, you wouldn't really expect this, but on the other hand you think it could and it most probably will start to bind it all together.\\nEven so, all this is not desperately efficient. The program took about 35 mins on my T43 (inside a VM) for the 1MB version of PI. Even so, the memory footprint was relatively small and stayed constant, but dividing that darned large number so many times just took a while.\"), mdx(\"p\", null, \"Well, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"strong\", {\n    parentName: \"em\"\n  }, \"I\")), \" am impressed! Not something you need every day, but a task that had me finished in C#.\"));\n}\n;\nMDXContent.isMDXComponent = true;","fields":{"slug":"/2007/05/15/haunted-by-pi-changing-a-numbers-base-in-haskell"},"frontmatter":{"date":"2007-05-15","path":null,"title":"Haunted by PI - changing a number's base in Haskell","tags":["software-development","geekdom","mathematics","haskell"]}}},"pageContext":{"title":"Haunted by PI - changing a number's base in Haskell","previous":{"fields":{"slug":"/2007/05/12/function-composition-in-c-3-0-stay-calm-gather-information-and-then-do-the-right-thing","published":true},"frontmatter":{"title":"Function composition in C#3.0 (Stay calm, gather information and then do the right thing)","tags":["software-development","download","dotnet"],"date":"2007/05/12"}},"next":{"fields":{"slug":"/2007/05/17/when-to-jump-into-the-water-with-maths","published":true},"frontmatter":{"title":"When to jump into the water - with maths","tags":["geekdom","mathematics"],"date":"2007/05/17"}}}},"staticQueryHashes":["256249292","2581731408"]}