{"data":{"markdownRemark":{"html":"<blockquote>\n<p>when this gets older and things change, be aware that this post uses</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm --version:     6.4.1\nnpx tsc --version  3.3.3333\nnpx func --version 2.3.317</code></pre></div>\n</blockquote>\n<p>Even though there is <a href=\"https://medium.com/@amr.farid140/awesome-typescript-azure-functions-part-1-project-setup-1f5950e7a704\">some prior art to this</a>, I wanted to document my own findings in the process somewhere. The next commands assume a powershell cli.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> ts-func-demo<span class=\"token punctuation\">;</span> <span class=\"token function\">cd</span> ts-func-demo\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> func\nnpx func init</code></pre></div>\n<p>Make sure your selected worker runtime is <code class=\"language-text\">node</code>. You now are sort of on the \"<em>host</em>\" level of things. Let's create an <em>actual</em> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx func new --language JavaScript --template HttpTrigger --name Ping\n<span class=\"token function\">cd</span> Ping\n<span class=\"token function\">rm</span> sample.dat</code></pre></div>\n<p>We are now in the \"Ping\" directory, containing an <code class=\"language-text\">index.js</code> and a <code class=\"language-text\">function.json</code> containing the binding definitions for your function. Function bindings are the Alpha and Omega of azure functions. Based on the template the index.js generated is set up to accept HTTP requests and respond to them.</p>\n<p>The next steps make sure that typescript is around and install some stuff that you'll need which you can read while npm is downloading parts of the internet.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm init\nnpm i --save typescript tslib\nnpm i --only=dev @azure/functions\nnpx tsc --init</code></pre></div>\n<ul>\n<li>We downloaded <code class=\"language-text\">tslib</code> - <code class=\"language-text\">tsc</code> compiles the typescript generated by you and tslib contains numerous helpers that are used by the generated js. </li>\n<li>The package <code class=\"language-text\">@azure/functions</code> contains type definitions for those things that the azure runtime provides to your code.</li>\n<li>Now you should have a <code class=\"language-text\">tsconfig.json</code> at your disposal which controls what the typescript compiler (tsc) will be doing.</li>\n</ul>\n<p>Here's one of my demo functions:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"allowSyntheticDefaultImports\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"commonjs\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"moduleResolution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es5\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"strict\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\".\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"forceConsistentCasingInFileNames\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"strictFunctionTypes\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"noUnusedLocals\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"rootDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./src\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"typeRoots\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"../node_modules/@types\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"../node_modules/@azure\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"lib\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"es2017\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"esnext.asynciterable\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"importHelpers\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"sourceMap\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"exclude\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"bin\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"node_modules\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","fields":{"slug":"/2019/02/24/writing-azure-functions-with-typescript"},"frontmatter":{"date":"February 24, 2019","path":null,"title":"Writing azure functions with typescript","tags":["web","azure","typescript"]}}},"pageContext":{"title":"Writing azure functions with typescript","previous":{"fields":{"slug":"/2019/01/30/xstate-a-typescript-state-machine-with-a-lot-of-features"},"frontmatter":{"title":"XState - a Typescript state machine with a lot of features","tags":["typescript","programming"],"date":"2019/01/30"}},"next":{"fields":{"slug":"/2019/02/03/typescript-type-shenanigans-2-specify-at-least-one-property"},"frontmatter":{"title":"Typescript type shenanigans 2: specify at least one property","tags":["web","typescript"],"date":"2019/02/03"}}}}