{"data":{"markdownRemark":{"html":"<blockquote>\n<p>Honestly, the end result seems so trivial that I almost couldn't be bothered\nto write it up. Then again, it shouldn't take too much time to write it down. ü§∑‚Äç</p>\n</blockquote>\n<h2>The problem</h2>\n<p>react components allow you to deal with all aspects of some interaction with the user.\nBut maybe you want some parts of the interaction to visually appear somewhere else?</p>\n<p><em>Example</em>: A form has a component that renders a delete button and also takes care of triggering the actual deletion. However, in case of an error you want the error to display in the error area of the whole form.</p>\n<p><img src=\"/assets/error-outlet-1.png\" alt=\"example of problem\"></p>\n<h2>A solution</h2>\n<p>Let's have some functionality dedicated to allowing components to render an error to some other place. For this we define a react context and a component that makes it simple to use that context:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> ErrorContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">ErrorDisplayBoundary</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> ctx <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> setError <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>ErrorContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>ctx<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ErrorContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>the context allows to change the error. In order to propagate rerenders every time that this component renders, we memoize the context. The <code class=\"language-text\">setError</code> callback remains stable throughout the lifetime of the component, hence we only check whether <code class=\"language-text\">error</code> changes.</p>","fields":{"slug":"/2019/03/11/use-reacts-context-to-display-an-error-message-somewhere-else"},"frontmatter":{"date":"March 11, 2019","path":null,"title":"Use react's context to display an error message somewhere else","tags":["programming","javascript","react"]}}},"pageContext":{"title":"Use react's context to display an error message somewhere else","previous":{"fields":{"slug":"/2019/03/03/innovation-vs-improvement","published":true},"frontmatter":{"title":"Innovation vs Improvement","tags":["software-development"],"date":"2019/03/03"}},"next":null}}