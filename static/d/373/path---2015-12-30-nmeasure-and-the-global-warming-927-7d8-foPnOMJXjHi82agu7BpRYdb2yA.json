{"data":{"markdownRemark":{"html":"<p>About 5 years ago I started work on a library that helps in dealing with measurements because a client\nwas falling for <a href=\"/2010/11/30/dealing-with-primitive-obsession-this-time-measurements\">primitive obsession</a>. Follow the link to read what it's all about. Some details\nare not 100% correct anymore but in general it still serves well.</p>\n<p>After figuring out with MemBus that producing nuget packages has become an incidental activity, I wanted\nto revive that dormant library, give it some love and dogfooding it a bit to myself.</p>\n<p>The result is <a href=\"https://www.nuget.org/packages/NMeasure/\">NMeasure</a>, which has been used for the following example calculation.</p>\n<p>You may have heard about the global warming summit and that scientists have basically agreed with each other\nthat we should try really hard to avoid the atmosphere to heat up an additional 2 degrees on average. It doesn't sound much,\nbut I was curious what this number means in terms of additional energy that the atmosphere would contain.</p>\n<p>Before we carry on...</p>\n<h4>Disclaimer:</h4>\n<ul>\n<li>The produced number is pretty much a ballpark figure, because</li>\n<li>We assume Earth to be a flat sphere (not too bad)</li>\n<li>\n<p>We only consider the volume from 0-2km above sea level</p>\n<ul>\n<li>at constant density (that will introduce an error in the 2-digit percentage range)</li>\n</ul>\n</li>\n<li>We deal purely with averages (coming from a uniform temperature to a new uniform temperature)</li>\n<li>The calculated energy is not freely available as such, it is just to give you a feel for what is at stake.</li>\n</ul>\n<h4>On we go</h4>\n<p>The calculation has been kept pretty straightforward:</p>\n<ul>\n<li>We take the volume of the low atmosphere</li>\n<li>We look up the <a href=\"https://www.google.de/search?q=specific+heat+air\">specific heat of air</a> in the proper temperature range (assuming today's average temperature of 14Â°C) with constant volume. </li>\n<li>We multiply it all through and get a number.</li>\n</ul>\n<p>The calculation is shown in the following gist with the aid of NMeasure:</p>\n<p><div id=\"gist29456043\" class=\"gist\">\n    <div class=\"gist-file\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-program-cs\" class=\"file\">\n    \n\n  <div itemprop=\"text\" class=\"blob-wrapper data type-c \">\n      \n<table class=\"highlight tab-size js-file-line-container\" data-tab-size=\"8\">\n      <tr>\n        <td id=\"file-program-cs-L1\" class=\"blob-num js-line-number\" data-line-number=\"1\"></td>\n        <td id=\"file-program-cs-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">System</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L2\" class=\"blob-num js-line-number\" data-line-number=\"2\"></td>\n        <td id=\"file-program-cs-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-en\">NMeasure</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L3\" class=\"blob-num js-line-number\" data-line-number=\"3\"></td>\n        <td id=\"file-program-cs-LC3\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L4\" class=\"blob-num js-line-number\" data-line-number=\"4\"></td>\n        <td id=\"file-program-cs-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">NMeasure</span>.<span class=\"pl-en\">U</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L5\" class=\"blob-num js-line-number\" data-line-number=\"5\"></td>\n        <td id=\"file-program-cs-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">using</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">System</span>.<span class=\"pl-en\">Math</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L6\" class=\"blob-num js-line-number\" data-line-number=\"6\"></td>\n        <td id=\"file-program-cs-LC6\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L7\" class=\"blob-num js-line-number\" data-line-number=\"7\"></td>\n        <td id=\"file-program-cs-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-k\">namespace</span> <span class=\"pl-en\">UsinMB</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L8\" class=\"blob-num js-line-number\" data-line-number=\"8\"></td>\n        <td id=\"file-program-cs-LC8\" class=\"blob-code blob-code-inner js-file-line\">{</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L9\" class=\"blob-num js-line-number\" data-line-number=\"9\"></td>\n        <td id=\"file-program-cs-LC9\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-en\">Program</span></td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L10\" class=\"blob-num js-line-number\" data-line-number=\"10\"></td>\n        <td id=\"file-program-cs-LC10\" class=\"blob-code blob-code-inner js-file-line\">    {</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L11\" class=\"blob-num js-line-number\" data-line-number=\"11\"></td>\n        <td id=\"file-program-cs-LC11\" class=\"blob-code blob-code-inner js-file-line\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">void</span> <span class=\"pl-en\">Main</span>(<span class=\"pl-k\">string</span>[] <span class=\"pl-smi\">args</span>)</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L12\" class=\"blob-num js-line-number\" data-line-number=\"12\"></td>\n        <td id=\"file-program-cs-LC12\" class=\"blob-code blob-code-inner js-file-line\">        {</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L13\" class=\"blob-num js-line-number\" data-line-number=\"13\"></td>\n        <td id=\"file-program-cs-LC13\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">StandardUnitConfiguration</span>.<span class=\"pl-en\">Use</span>();</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L14\" class=\"blob-num js-line-number\" data-line-number=\"14\"></td>\n        <td id=\"file-program-cs-LC14\" class=\"blob-code blob-code-inner js-file-line\">            </td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L15\" class=\"blob-num js-line-number\" data-line-number=\"15\"></td>\n        <td id=\"file-program-cs-LC15\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">rEarth</span> <span class=\"pl-k\">=</span> (<span class=\"pl-c1\">6371</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Kilometer</span>).<span class=\"pl-en\">ConvertTo</span>(<span class=\"pl-smi\">Meter</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L16\" class=\"blob-num js-line-number\" data-line-number=\"16\"></td>\n        <td id=\"file-program-cs-LC16\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">rAir</span> <span class=\"pl-k\">=</span> (<span class=\"pl-c1\">6373</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Kilometer</span>).<span class=\"pl-en\">ConvertTo</span>(<span class=\"pl-smi\">Meter</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L17\" class=\"blob-num js-line-number\" data-line-number=\"17\"></td>\n        <td id=\"file-program-cs-LC17\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">dAir</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">1.225m</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Kilogram</span> <span class=\"pl-k\">/</span> (<span class=\"pl-smi\">Meter</span> <span class=\"pl-k\">^</span> <span class=\"pl-c1\">3</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L18\" class=\"blob-num js-line-number\" data-line-number=\"18\"></td>\n        <td id=\"file-program-cs-LC18\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">Cv</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">718</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Joule</span> <span class=\"pl-k\">/</span> (<span class=\"pl-smi\">Kilogram</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Kelvin</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L19\" class=\"blob-num js-line-number\" data-line-number=\"19\"></td>\n        <td id=\"file-program-cs-LC19\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">tempIncrease</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">2</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Kelvin</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L20\" class=\"blob-num js-line-number\" data-line-number=\"20\"></td>\n        <td id=\"file-program-cs-LC20\" class=\"blob-code blob-code-inner js-file-line\">            </td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L21\" class=\"blob-num js-line-number\" data-line-number=\"21\"></td>\n        <td id=\"file-program-cs-LC21\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">volume</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">4d</span> <span class=\"pl-k\">/</span> <span class=\"pl-c1\">3d</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">PI</span> <span class=\"pl-k\">*</span> ((<span class=\"pl-smi\">rAir</span> <span class=\"pl-k\">^</span> <span class=\"pl-c1\">3</span>) <span class=\"pl-k\">-</span> (<span class=\"pl-smi\">rEarth</span> <span class=\"pl-k\">^</span> <span class=\"pl-c1\">3</span>));</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L22\" class=\"blob-num js-line-number\" data-line-number=\"22\"></td>\n        <td id=\"file-program-cs-LC22\" class=\"blob-code blob-code-inner js-file-line\">            </td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L23\" class=\"blob-num js-line-number\" data-line-number=\"23\"></td>\n        <td id=\"file-program-cs-LC23\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">surplusEnergy</span> <span class=\"pl-k\">=</span> (<span class=\"pl-smi\">volume</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">dAir</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Cv</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">tempIncrease</span>).<span class=\"pl-en\">ConvertTo</span>(<span class=\"pl-smi\">GigaJoule</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L24\" class=\"blob-num js-line-number\" data-line-number=\"24\"></td>\n        <td id=\"file-program-cs-LC24\" class=\"blob-code blob-code-inner js-file-line\">            </td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L25\" class=\"blob-num js-line-number\" data-line-number=\"25\"></td>\n        <td id=\"file-program-cs-LC25\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-k\">var</span> <span class=\"pl-smi\">annualEnergyInGJ</span> <span class=\"pl-k\">=</span> <span class=\"pl-c1\">3600d</span> <span class=\"pl-k\">*</span> <span class=\"pl-c1\">23536500d</span>;</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L26\" class=\"blob-num js-line-number\" data-line-number=\"26\"></td>\n        <td id=\"file-program-cs-LC26\" class=\"blob-code blob-code-inner js-file-line\">            </td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L27\" class=\"blob-num js-line-number\" data-line-number=\"27\"></td>\n        <td id=\"file-program-cs-LC27\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">Console</span>.<span class=\"pl-en\">WriteLine</span>(<span class=\"pl-smi\">volume</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L28\" class=\"blob-num js-line-number\" data-line-number=\"28\"></td>\n        <td id=\"file-program-cs-LC28\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">Console</span>.<span class=\"pl-en\">WriteLine</span>(<span class=\"pl-smi\">volume</span> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">dAir</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L29\" class=\"blob-num js-line-number\" data-line-number=\"29\"></td>\n        <td id=\"file-program-cs-LC29\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">Console</span>.<span class=\"pl-en\">WriteLine</span>(<span class=\"pl-smi\">surplusEnergy</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L30\" class=\"blob-num js-line-number\" data-line-number=\"30\"></td>\n        <td id=\"file-program-cs-LC30\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">Console</span>.<span class=\"pl-en\">WriteLine</span>(<span class=\"pl-smi\">Convert</span>.<span class=\"pl-en\">ToDouble</span>(<span class=\"pl-smi\">surplusEnergy</span>.<span class=\"pl-smi\">Value</span>) <span class=\"pl-k\">/</span> <span class=\"pl-smi\">annualEnergyInGJ</span>);</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L31\" class=\"blob-num js-line-number\" data-line-number=\"31\"></td>\n        <td id=\"file-program-cs-LC31\" class=\"blob-code blob-code-inner js-file-line\">            <span class=\"pl-smi\">Console</span>.<span class=\"pl-en\">ReadLine</span>(); </td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L32\" class=\"blob-num js-line-number\" data-line-number=\"32\"></td>\n        <td id=\"file-program-cs-LC32\" class=\"blob-code blob-code-inner js-file-line\">        }</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L33\" class=\"blob-num js-line-number\" data-line-number=\"33\"></td>\n        <td id=\"file-program-cs-LC33\" class=\"blob-code blob-code-inner js-file-line\">    }</td>\n      </tr>\n      <tr>\n        <td id=\"file-program-cs-L34\" class=\"blob-num js-line-number\" data-line-number=\"34\"></td>\n        <td id=\"file-program-cs-LC34\" class=\"blob-code blob-code-inner js-file-line\">}</td>\n      </tr>\n</table>\n\n\n  </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/flq/aaf315d162e7394865b4/raw/90e5564a09dd74d2442b0defa21a228c38195aa4/Program.cs\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/flq/aaf315d162e7394865b4#file-program-cs\">Program.cs</a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div>\n</p>\n<p>NMeasure profits <em>a lot</em> from C# 6's ability to use static members of a type (see line 4). The units used\nare static properties of the type <em>U</em> (e.g. U.KiloMeter) and it is really tasty to be able to use the units as shown in the\nprogram.</p>\n<p>Line 13 ensures that a lot of conversions dealing with SI and Imperial units are known to NMeasure. Yes, Units and conversions\nare not hard-coded, you need to set them up before you start using NMeasure. That way, you are free to introduce your own\nmeasurement units<sup>*)</sup>.</p>\n<p>With regard to the available operators: Only when I found some odd behaviour around operator precedence did it occur to me\nthat the <em>^</em>-operator is a bitwise operator in C# and has usually nothing to do with the mathematical operation\n<em>x to the power of y</em> - I've left it in, though, since it is used like that in numerous other languages. The disadvantage\nis that in C# the operator has even lower precedence than addition/subtraction, which makes some silly brackets necessary.</p>\n<p>Once the calculation is performed we arrive at this number:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1.795E+12 GJ</code></pre></div>\n<p>of additional energy available in the atmosphere.\nSounds quite a lot, and it is. If we compare this to the <a href=\"https://en.wikipedia.org/wiki/List_of_countries_by_electricity_production\">World's energy production</a> we see that in order to make\nthis amount of energy available, our current energy production would have to run for about <em>21 years</em>.</p>\n<p>Of course this energy isn't freely available in full, but it adds a lot more dynamics to any transient phenomena occurring\nin the atmosphere, i.e.</p>\n<ul>\n<li>changes are quicker</li>\n<li>frequencies get higher</li>\n<li>amplitudes grow</li>\n</ul>\n<p>Here we are, one incoherent blog post further, probably none the wiser - but at least I could scratch two itches at once!</p>\n<h4>*)</h4>\n<p>A long time ago I was crazy enough to construct a unit system for a species appearing in some of my Sci-Fi stuff. I extracted\nit from an old Excel-sheet of mine into a test harness:</p>\n<p>`gist:aaf315d162e7394865b4#aaf315d162e7394865b4#file-iiunittests-cs</p>","fields":{"slug":"/2015/12/30/nmeasure-and-the-global-warming"},"frontmatter":{"date":"December 30, 2015","path":null,"title":"NMeasure and the global warming","tags":["physics","own-software","dotnet","site"]}}},"pageContext":{"title":"NMeasure and the global warming","previous":{"fields":{"slug":"/2015/08/28/porting-a-react-application-to-typescript"},"frontmatter":{"title":"Porting a react application to typescript","tags":["web","programming","typescript","javascript","react"],"date":"2015/08/27"}},"next":{"fields":{"slug":"/2016/02/04/where-is-the-house"},"frontmatter":{"title":"Where is the house","tags":["fsharp"],"date":"2016/02/04"}}}}