<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.6708a7212b135e4abae1.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

/*! normalize.css v3.0.2 | MIT License | git.io/normalize */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}:root{--linkColorMain:#af0000;--linkColorMainContrast:#c6f8ff;--linkColor:#1eaedb;--linkHoverHighlight:#fff 0px 0px 5px,#7791b3 0px 0px 10px;--background:#fff;--sidePadding:0.75rem;--topShadow:0px 5px 7px 0px rgba(0,0,0,0.55);--lightSeparator:1px solid #d3d3d3;--standardShadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}body{font-size:1.5em;line-height:1.6;font-weight:400;font-family:Raleway,HelveticaNeue,Helvetica Neue,Helvetica,Arial,sans-serif;padding:0 var(--sidePadding) 0 var(--sidePadding)}a{color:var(--linkColor)}figcaption{text-align:center;font-style:italic;color:#777;display:block;margin-bottom:2em}img{display:block;margin:20px auto;max-width:100%;box-shadow:var(--standardShadow)}blockquote{background:#f9f9f9;border-left:10px solid #ccc;padding:.5rem 10px;quotes:"\201C""\201D""\2018""\2019"}blockquote:before{color:#ccc;content:"\201D";font-size:4em;font-family:helvetica;line-height:.1em;margin-right:.25em;vertical-align:-.4em}pre[class*=language-]{font-size:1rem;box-shadow:var(--standardShadow)}a{-webkit-text-decoration-style:dotted;text-decoration-style:dotted}h1{font-size:2.1rem}h1,h2{line-height:1.2}h2{font-size:1.7rem}h3{line-height:1.2;letter-spacing:.05rem}h3,h4{font-size:1.5rem}h4{font-weight:lighter;font-style:italic}@media (min-width:768px){h1{font-size:2.5rem}h1,h2{line-height:1.3}h2{font-size:2rem}h3{line-height:1.1}h3,h4{font-size:1.7rem}}.layout-module--layout--3NElS{display:flex;flex-direction:column;align-items:center}.layout-module--main--1XJsu{padding:5rem 0 1rem;width:100%}@media (min-width:768px){.layout-module--main--1XJsu{width:90%}}@media (min-width:1200px){.layout-module--main--1XJsu{width:70%}}@media (min-width:2000px){.layout-module--main--1XJsu{width:1060px}}.SiteHeader-module--siteNav--3VakG{display:flex;align-items:stretch;justify-content:center;padding:.5rem var(--sidePadding);box-shadow:var(--topShadow);background-color:var(--background);z-index:10;position:fixed;top:0;right:0;left:0}.SiteHeader-module--main--uZpGc{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.SiteHeader-module--siteHeader--3gDoz{font-family:Lora,serif;font-style:italic;letter-spacing:.01rem;text-shadow:2px 1px 1px #999;margin:0 1rem 0 0;font-size:2.2rem}.SiteHeader-module--mainLink---Exlm,.SiteHeader-module--siteLink--1QNau{text-decoration:none;display:inline-block}.SiteHeader-module--mainLink---Exlm:hover,.SiteHeader-module--siteLink--1QNau:hover{text-decoration:underline}.SiteHeader-module--mainLink---Exlm,.SiteHeader-module--mainLink---Exlm:visited,.SiteHeader-module--siteLink--1QNau,.SiteHeader-module--siteLink--1QNau:visited{color:var(--linkColorMain)}.SiteHeader-module--siteLink--1QNau:not(:first-child):before{content:" | ";color:#000;margin:0 .25rem;text-decoration:none;display:inline-block}@media (min-width:768px){.SiteHeader-module--main--uZpGc{width:90%}}@media (min-width:1200px){.SiteHeader-module--main--uZpGc{width:70%}}@media (min-width:2000px){.SiteHeader-module--main--uZpGc{width:1060px}}.Footer-module--main--1QC0I{width:100%;display:flex;flex-direction:row;padding-top:.5rem;margin-bottom:2rem;justify-content:center;align-items:center;font-size:1rem;border-top:var(--lightSeparator)}.Footer-module--main--1QC0I img{margin:.25rem;box-shadow:none}.Footer-module--main--1QC0I p{margin:.25rem}@media (min-width:768px){.Footer-module--main--1QC0I{width:90%}}@media (min-width:1200px){.Footer-module--main--1QC0I{width:70%}}@media (min-width:2000px){.Footer-module--main--1QC0I{width:55%}}.tags-module--columnList--2IU2r{display:grid;list-style:circle inside;grid-auto-flow:row;grid-template-columns:repeat(auto-fill,300px);max-width:100%;font-size:1.2rem}.tags-module--columnList--2IU2r a{text-decoration:none}.tags-module--columnList--2IU2r a:hover{text-decoration:underline}.Tag-module--tags--3UNk1{margin-top:.5rem}.Tag-module--tag--3otWA{background-color:var(--linkColor);color:var(--linkColorMainContrast);text-decoration:none;font-size:1.1rem;margin-top:0;padding:.25rem}.Tag-module--tag--3otWA,.Tag-module--tagOuter--27OmX{border-top-right-radius:10px;border-bottom-right-radius:10px;border-top-left-radius:5px;border-bottom-left-radius:5px}.Tag-module--tagOuter--27OmX{display:inline-flex;margin:0 .5rem .5rem 0;padding:0;line-height:1.1rem;box-shadow:5px 5px 8px -8px rgba(0,0,0,.91)}.Tag-module--tagOuter--27OmX:hover{text-shadow:var(--linkHoverHighlight)}.Tag-module--tag--3otWA:after{margin-left:.75rem;font-size:1.5rem;vertical-align:middle;content:"â€¢"}.YouTubeEmbed-module--frame--JPpxk{display:block;margin:20px auto;width:516px;height:315px;max-width:100%;box-shadow:var(--standardShadow)}.Info-module--infoContainer--1O0oR,.Tweet-module--tweet--1nwF8{display:flex;justify-content:center}.Info-module--info--1Qfs3{position:relative;background:#c6f8ff;border-left:10px solid var(--linkColor);margin-bottom:2.5rem;box-shadow:var(--standardShadow);padding:1rem .25rem 1rem 60px;quotes:"\201C""\201D""\2018""\2019"}.Info-module--info--1Qfs3>p{margin:0}div.Info-module--info--1Qfs3:before{position:absolute;left:5px;color:var(--linkColor);content:"\24D8";font-size:1.8em;font-family:helvetica;margin-right:.25em;vertical-align:-.2em}.DateDisplay-module--dateContainer--1trkw{align-self:flex-start;display:inline-grid;grid-template-columns:0 auto;grid-template-rows:auto auto;border:1px solid var(--linkColorMain);border-radius:5px}.DateDisplay-module--month--2KOka{font-size:1rem;line-height:1rem;text-align:center;padding:.25rem .5rem;display:block;grid-column:2;grid-row:1}.DateDisplay-module--date--oZxQz{display:flex;grid-column:2;grid-row:2;background-color:var(--linkColorMain);color:#fff;padding:.25rem 0;font-size:1.2rem;line-height:1.2rem;text-align:center;justify-self:stretch;justify-content:center;align-items:center}.DateDisplay-module--year--2577t{display:block;visibility:hidden;-ms-writing-mode:tb-lr;writing-mode:vertical-lr;grid-column:1;grid-row:1/span 2;padding:.25rem;line-height:1rem}.DateDisplay-module--excerpt--ac7UJ{font-size:1.4rem;margin:.25rem}@media (min-width:500px){.DateDisplay-module--dateContainer--1trkw{grid-template-columns:1.5rem 3rem}.DateDisplay-module--year--2577t{visibility:visible}}.postExcerpt-module--article--1YC-H{margin-bottom:3rem}.postExcerpt-module--article--1YC-H:last-of-type{margin-bottom:0}.postExcerpt-module--headerContainer--hcRy6{display:flex;flex-direction:row;align-items:center}.postExcerpt-module--header--1LVL4{font-size:1.7rem;line-height:2rem;margin:0 0 0 .5rem}.postExcerpt-module--header--1LVL4 a{text-decoration:none}.postExcerpt-module--header--1LVL4 a:hover{text-decoration:underline}.postExcerpt-module--dateContainer--3lfoy{align-self:flex-start;display:inline-grid;grid-template-columns:auto auto;grid-template-rows:auto auto;border:1px solid var(--linkColorMain);border-radius:5px}.postExcerpt-module--month--59SAH{font-size:1rem;line-height:1rem;text-align:center;padding:.25rem .5rem;display:block;grid-column:2;grid-row:1}.postExcerpt-module--date--2LGbD{display:block;grid-column:2;grid-row:2;background-color:var(--linkColorMain);color:#fff;padding:.25rem 0;font-size:1.2rem;line-height:1.2rem;text-align:center;justify-self:stretch}.postExcerpt-module--year--w1z16{display:block;-ms-writing-mode:tb-lr;writing-mode:vertical-lr;grid-column:1;grid-row:1/span 2;padding:.25rem;line-height:1rem}.postExcerpt-module--excerpt--2vlk7{font-size:1.4rem;margin:.25rem}.TopicToc-module--container--iTCNh{border-radius:25px;background:#f9f9f9;box-shadow:var(--standardShadow)}.TopicToc-module--header--23y04{text-align:right;border-top-left-radius:25px;border-top-right-radius:25px;font-size:1.2em;background-color:#777;color:#fff;margin-bottom:0;padding:2px 20px 2px 0;font-style:italic}.TopicToc-module--list--d3sjU{list-style-type:upper-roman;margin:1rem;padding-bottom:1rem;list-style-position:outside}.Discussion-module--alpha--2wwoE{margin-right:20%}.Discussion-module--beta--280lX{margin-left:20%}.Discussion-module--alpha--2wwoE:before{content:"Î·: Â«"}.Discussion-module--alpha--2wwoE:after,.Discussion-module--beta--280lX:after{content:"Â»"}.Discussion-module--beta--280lX:before{content:"Î¼: Â«"}.articleTemplate-module--header--354F0{display:grid;grid-template-rows:auto auto;grid-template-columns:auto auto;column-gap:.25rem;font-size:1.2rem;margin-bottom:2rem}.articleTemplate-module--date--2zr35{grid-column:2;grid-row:1;justify-self:end}.articleTemplate-module--h1--2QcXm{grid-row:1;grid-column:1;margin:0}.articleTemplate-module--tags--1YeyG{grid-row:2;grid-column:1/span 2}.PreviousAndNext-module--navigation--123UK{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,auto);border:1px solid var(--linkColor);border-radius:5px}.PreviousAndNext-module--link--iq7Ea{display:flex;align-items:center;justify-content:center;padding:.25rem 1.5rem;background-color:var(--linkColor);color:var(--linkColorMainContrast);text-decoration:none;align-self:stretch;margin:.25rem;border-radius:5px}.PreviousAndNext-module--linkPrevious--2WFha{grid-column:1;grid-row:1}.PreviousAndNext-module--linkNext--3jMS3{grid-column:2;grid-row:1}.PreviousAndNext-module--disabled--oYrWw{opacity:.2}.PreviousAndNext-module--link--iq7Ea:hover{text-shadow:var(--linkHoverHighlight)}.PreviousAndNext-module--title--3-yUO{font-size:1rem;padding:0 .5rem}.PreviousAndNext-module--border--dT-B7{border-left:1px dashed var(--linkColor)}@media (min-width:768px){.PreviousAndNext-module--navigation--123UK{grid-template-columns:auto repeat(2,1fr) auto;grid-template-rows:auto}.PreviousAndNext-module--link--iq7Ea{margin:0;border-radius:0}.PreviousAndNext-module--linkPrevious--2WFha{grid-column:1}.PreviousAndNext-module--linkNext--3jMS3{grid-column:4}.PreviousAndNext-module--border--dT-B7{border-left:1px solid var(--linkColor)}}.tagTemplate-module--articleList--1XmWn{font-size:1.2rem;list-style:circle inside}.tagTemplate-module--articleList--1XmWn a,.tagTemplate-module--articleListHeader--3yVYd a{text-decoration:none}.tagTemplate-module--articleList--1XmWn a:hover,.tagTemplate-module--articleListHeader--3yVYd a:hover{text-decoration:underline}</style><meta name="generator" content="Gatsby 3.4.2"/><title data-react-helmet="true">each_cons - the wise and tall of popular languages</title><link data-react-helmet="true" rel="preconnect" href="https://fonts.gstatic.com"/><link data-react-helmet="true" href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet"/><link data-react-helmet="true" href="//fonts.googleapis.com/css2?family=Lora:ital,wght@1,500&amp;display=swap" rel="stylesheet"/><meta data-react-helmet="true" name="description" content="Content from Frank Quednau about dev and fields of interest."/><meta data-react-helmet="true" name="keywords" content="programming, ruby, csharp, fsharp, haskell"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="each_cons - the wise and tall of popular languages"/><meta data-react-helmet="true" name="twitter:site:id" content="fquednau"/><meta data-react-helmet="true" name="twitter:description" content="A few days ago, Michael Feathers tweeted this: Now, I am not a complete  stranger to ruby , which is why this statement resonated with me, and uponâ€¦"/><meta data-react-helmet="true" name="twitter:image" content="https://realfiction.net/icons/icon-72x72.png"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="Realfiction RSS" href="/atom.xml"/><link rel="icon" href="/favicon-32x32.png?v=4ebdacb62247bfbfe92c555d6c833c53" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4ebdacb62247bfbfe92c555d6c833c53"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link as="script" rel="preload" href="/webpack-runtime-c0e9b35e2527e2b6d994.js"/><link as="script" rel="preload" href="/framework-75034fa8e3a9e81ff051.js"/><link as="script" rel="preload" href="/app-18c5db79b52bec877cad.js"/><link as="script" rel="preload" href="/commons-5ffe1f2bcdc9b9fa2a3d.js"/><link as="script" rel="preload" href="/component---src-templates-article-template-js-f04abf4d737cf958b9a2.js"/><link as="fetch" rel="preload" href="/page-data/2017/05/22/each_cons-the-wise-and-tall-of-popular-languages/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/256249292.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2581731408.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--layout--3NElS"><nav class="SiteHeader-module--siteNav--3VakG"><div class="SiteHeader-module--main--uZpGc"><h1 class="SiteHeader-module--siteHeader--3gDoz"><a class="SiteHeader-module--mainLink---Exlm" href="/">Realfiction</a></h1><div><a class="SiteHeader-module--siteLink--1QNau" href="/tags">Tags</a><a class="SiteHeader-module--siteLink--1QNau" href="/about">About</a></div></div></nav><main class="layout-module--main--1XJsu"><article><header class="articleTemplate-module--header--354F0"><time class="DateDisplay-module--dateContainer--1trkw articleTemplate-module--date--2zr35" dateTime="2017-05-22"><span class="DateDisplay-module--month--2KOka">May</span><span class="DateDisplay-module--date--oZxQz">22</span><span class="DateDisplay-module--year--2577t">2017</span></time><h1 class="articleTemplate-module--h1--2QcXm">each_cons - the wise and tall of popular languages</h1><nav class="Tag-module--tags--3UNk1 articleTemplate-module--tags--1YeyG"><div class="Tag-module--tagOuter--27OmX"><a class="Tag-module--tag--3otWA" href="/tags/programming">programming</a></div><div class="Tag-module--tagOuter--27OmX"><a class="Tag-module--tag--3otWA" href="/tags/ruby">ruby</a></div><div class="Tag-module--tagOuter--27OmX"><a class="Tag-module--tag--3otWA" href="/tags/csharp">csharp</a></div><div class="Tag-module--tagOuter--27OmX"><a class="Tag-module--tag--3otWA" href="/tags/fsharp">fsharp</a></div><div class="Tag-module--tagOuter--27OmX"><a class="Tag-module--tag--3otWA" href="/tags/haskell">haskell</a></div></nav></header><p>A few days ago, Michael Feathers tweeted this:</p><div class="Tweet-module--tweet--1nwF8"><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">The fact that many simple correct Ruby programs become ridiculously complex when translated to other languages means something.</p>&mdash; Michael Feathers (@mfeathers) <a href="https://twitter.com/mfeathers/status/864122686695460866">May 15, 2017</a></blockquote></div><p>Now, I am not a complete <a href="/tags/ruby">stranger to ruby</a>, which is why this statement resonated with me, and upon requesting an example, Michael came up with this:</p><div class="Tweet-module--tweet--1nwF8"><blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/fquednau">@fquednau</a> The simple ones are interesting. Try this in C#: ([0] + arr).each_cons(2).count {|x,y| x == 0 &amp;&amp; y == 1 }</p>&mdash; Michael Feathers (@mfeathers) <a href="https://twitter.com/mfeathers/status/864222881538072578">May 15, 2017</a></blockquote></div><p>or</p><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> arr<span class="token punctuation">)</span><span class="token punctuation">.</span>each_cons<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count <span class="token punctuation">{</span><span class="token operator">|</span>x<span class="token punctuation">,</span>y<span class="token operator">|</span> x <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">}</span></code></pre></div><blockquote><p><a href="https://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-each_cons">each_cons</a> is a function that provides consecutive elements
of a given list. E.g.
<code class="language-text">[0,1,2,3].each_cons(3).each { |x,y,z| puts &quot;#{x},#{y},#{z}&quot; }</code>
It can be useful for obtaining info about the local structure
of a list. Think derivatives, rates of change, etc. and probably
a host of other things.</p></blockquote><p>This does indeed show off ruby&#x27;s expresiveness quite nicely:</p><ul><li>A simple syntax to concatenate lists</li><li>A rich set of libraries for manipulation of things (I am referring to the <em>each<!-- -->_<!-- -->cons</em>)</li><li>The syntax of ruby&#x27;s yields and blocks, which have been used so many times as the syntactical basis for DSLs</li></ul><p>The fact that the parameter influences how many items will be yielded into
your block reminds us why all of us like to write Javascript once in a while.</p><p><strong>What about other languages then?</strong></p><h2>F<!-- -->#</h2><p>Let&#x27;s look at the code which performs (almost) the same job:</p><div class="gatsby-highlight" data-language="fsharp"><pre class="language-fsharp"><code class="language-fsharp"><span class="token computation-expression keyword">seq</span> <span class="token punctuation">{</span> <span class="token keyword">yield</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">yield!</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">.</span><span class="token number">.4</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token operator">|&gt;</span> Seq<span class="token punctuation">.</span>pairwise 
  <span class="token operator">|&gt;</span> Seq<span class="token punctuation">.</span>filter <span class="token punctuation">(</span><span class="token keyword">fun</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token operator">|&gt;</span> Seq<span class="token punctuation">.</span>length</code></pre></div><p>It is pretty compact and readable, but even though some things look
similar, they actually use completely different mechanics of the
language</p><ul><li>The first line is a <a href="https://docs.microsoft.com/en-us/dotnet/articles/fsharp/language-reference/sequences">computational expression to generate sequences</a> which provides
us with a pretty syntax for concatenating elements and lists of elements</li><li>The <em>pairwise</em> is the closest we get to <em>each<!-- -->_<!-- -->cons</em></li><li>The <em>length</em> does not have a version where we can provide a filter condition, so we
need to specify the filter beforehand.</li><li>The <em>pairwise</em> method provides a tuple which is then pattern matched into two arguments in the
lambda to <em>filter</em>.</li></ul><p>Of note is that <em>pairwise</em> will provide exactly 2 consecutive elements of a list, it
does not allow a parameter like the ruby version. This makes sense, since F<!-- -->#<!-- --> is statically typed.
If you wanted a version that provides 3 consecutive elements, you would have to write a method
yourself that yields an element of type <strong>(a,a,a)</strong>.</p><h2>C<!-- -->#</h2><p>To actually achieve the same level of expressiveness we need to put some work into this:</p><p><img src="/assets/csharp_cons.jpg"/></p><p>With those two additional extension methods we can now write</p><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token number">0</span><span class="token punctuation">.</span><span class="token function">ToEnumerable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Windowed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>x <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> t<span class="token punctuation">.</span>y <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>While tuples are now available in c#, you cannot deconstruct them like you can do in most other
functional languages or even in ES2016
(which has actually gone to great lengths to make deconstruction a dependable feature).</p><p>While I can kind of forgive a missing <em>each<!-- -->_<!-- -->cons</em>-like BCL method, I write the <em>ToEnumerable</em> again in almost every project. I mean, that method is the damned <a href="https://en.wikipedia.org/wiki/Monad_(functional_programming)#Overview">unary return operation</a>!</p><h2>Kotlin</h2><p>Xavier Lepaul chimed in with a view on what Kotlin is up to with respect to the challenge:</p><div class="Tweet-module--tweet--1nwF8"><blockquote class="twitter-tweet" data-conversation="none" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/mfeathers">@mfeathers</a> <a href="https://twitter.com/fquednau">@fquednau</a> Kotlin is almost there (with <a href="https://t.co/b2TpoX5LqA">https://t.co/b2TpoX5LqA</a>)<br>(listOf(0) + arr).windowed(2).count {(x,y) -&gt; x == 0 &amp;&amp; y == 1}</p>&mdash; Xavier Lepaul (@xlepaul) <a href="https://twitter.com/xlepaul/status/864404258476752896">May 16, 2017</a></blockquote></div><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token punctuation">(</span><span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> arr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">windowed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span> <span class="token punctuation">{</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> x <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">}</span></code></pre></div><p>This doesn&#x27;t fall very short of the ruby example, however, the <em>windowed</em> is not available yet in
Kotlin 1.1 - What I particularly liked is that even though the type signature of <em>windowed</em> is</p><div class="gatsby-highlight" data-language="kotlin"><pre class="language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Iterable<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">windowed</span><span class="token punctuation">(</span>size<span class="token operator">:</span> Int<span class="token punctuation">,</span> step<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&gt;</span></code></pre></div><p>i.e. returning a list of lists, one can still deconstruct the list into the x and y you can
see in the lambda provided to <em>count</em>. This works because the deconstruction in kotlin simply
starts working when the deconstructed object provides methods named <em>component1</em> down to
<em>componentN</em>. A quick look at Kotlin&#x27;s list type...</p><p><img src="/assets/kotlin_destructure.png"/></p><p>Kudos to the Kotlin team which make a language that feels functional with strategies that are
very different to a &quot;real&quot; functional language. I have been an outsider to the JVM most of my
time, but when you get to know Java and Kotlin I really cannot fathom what exactly would make you
stick to Java.</p><h2>Type safety vs elegance?</h2><p>In order for ruby and Kotlin to shine in this example, both pay up by allowing misunderstandings
in API use to surface only at runtime. Note that in both languages the compiler will happily allow
you to capture more or less output than <em>each<!-- -->_<!-- -->cons</em>/<em>windowed</em> actually provides. This seems to be
the price you need to pay for such an API, since the output <em>&quot;type&quot;</em> is determined by the argument to the windowing function. Now if there was a language where types
could be determined programmatically...</p><h2>Idris</h2><p><a href="http://docs.idris-lang.org">Idris</a> is a programming language which is close in spirit to Haskell but adds the capability
to define <em>dependent types</em>. </p><blockquote><p>Disclaimer: I have never worked with Idris before, I just had the vague idea that dependent
types could be what I was looking for in this moment. Most of the things in Idris continue
to be outside my grasp. Many, many thanks go out to <strong>Anton Trunov</strong> who
<a href="http://stackoverflow.com/questions/44078891/how-do-i-evaluate-this-recursive-function-in-idris-interactive">answered</a> my stackoverflow <a href="http://stackoverflow.com/questions/44079181/idris-vect-fromlist-usage-with-generated-list">questions</a>.</p></blockquote><p>In this language, we can define the following type signature for a method:</p><div class="gatsby-highlight" data-language="haskell"><pre class="language-haskell"><code class="language-haskell"><span class="token hvariable">window</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token hvariable">n</span> <span class="token operator">:</span> <span class="token constant">Nat</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token constant">List</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">List</span> <span class="token punctuation">(</span><span class="token constant">Vect</span> <span class="token hvariable">n</span> <span class="token hvariable">a</span><span class="token punctuation">)</span></code></pre></div><p>This describes a method that takes a natural number <strong>n</strong>,
and a list containing things with type <strong>a</strong> and then returns a list containing vectors of length <strong>n</strong>. <strong>n</strong> has now become part of the type definition for <strong>Vect</strong>. With much help
(I couldn&#x27;t see how to make the leap from the variable length <strong>List a</strong> to the type <strong>Vect n a</strong>),
this is then one possible implementation of <em>windowed</em> in Idris: </p><div class="gatsby-highlight" data-language="haskell"><pre class="language-haskell"><code class="language-haskell"><span class="token hvariable">total</span>
<span class="token hvariable">takeExact</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token hvariable">n</span> <span class="token operator">:</span> <span class="token constant">Nat</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span><span class="token hvariable">xs</span> <span class="token operator">:</span> <span class="token constant">List</span> <span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token constant">Maybe</span> <span class="token punctuation">(</span><span class="token constant">Vect</span> <span class="token hvariable">n</span> <span class="token hvariable">a</span><span class="token punctuation">)</span>
<span class="token hvariable">takeExact</span> <span class="token constant">Z</span> <span class="token hvariable">xs</span> <span class="token operator">=</span> <span class="token constant">Just</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token hvariable">takeExact</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token hvariable">n</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">Nothing</span>
<span class="token hvariable">takeExact</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token hvariable">n</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">::</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token hvariable">with</span> <span class="token punctuation">(</span><span class="token hvariable">takeExact</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span>
  <span class="token hvariable">takeExact</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token hvariable">n</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">::</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token constant">Nothing</span> <span class="token operator">=</span> <span class="token constant">Nothing</span>
  <span class="token hvariable">takeExact</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token hvariable">n</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">::</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token hvariable">v</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">Just</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">::</span> <span class="token hvariable">v</span><span class="token punctuation">)</span>


<span class="token hvariable">total</span>
<span class="token hvariable">window</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token hvariable">n</span> <span class="token operator">:</span> <span class="token constant">Nat</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token constant">List</span> <span class="token hvariable">a</span> <span class="token operator">-&gt;</span> <span class="token constant">List</span> <span class="token punctuation">(</span><span class="token constant">Vect</span> <span class="token hvariable">n</span> <span class="token hvariable">a</span><span class="token punctuation">)</span>
<span class="token hvariable">window</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span> <span class="token hvariable">with</span> <span class="token punctuation">(</span><span class="token hvariable">takeExact</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span>
  <span class="token hvariable">window</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span> <span class="token operator">|</span> <span class="token constant">Nothing</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token hvariable">window</span> <span class="token hvariable">n</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token hvariable">window</span> <span class="token hvariable">n</span> <span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">::</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token constant">Just</span> <span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">ys</span> <span class="token operator">::</span> <span class="token hvariable">window</span> <span class="token hvariable">n</span> <span class="token hvariable">xs</span></code></pre></div><blockquote><p><em>total</em> tells the Idris compiler to check the method whether it is indeed total as far as
Idris is capable to tell. Total means that this method is guaranteed to return for whatever
input that is provided. <strong>Z</strong> and <strong>S</strong> are types representing <strong>Zero</strong>
and <strong>Successor</strong> within the Natural number type.</p></blockquote><p>Now we can use the window function to write down the example provided.</p><div class="gatsby-highlight" data-language="haskell"><pre class="language-haskell"><code class="language-haskell"><span class="token comment">--with</span>
<span class="token hvariable">condition</span> <span class="token operator">:</span> <span class="token constant">Vect</span> <span class="token number">2</span> <span class="token constant">Integer</span> <span class="token operator">-&gt;</span> <span class="token constant">Bool</span>
<span class="token hvariable">condition</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token hvariable">x</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token hvariable">y</span> <span class="token operator">==</span> <span class="token number">1</span>

<span class="token operator">*</span><span class="token hvariable">hello</span><span class="token operator">&gt;</span> <span class="token builtin">length</span> <span class="token operator">$</span> <span class="token builtin">filter</span> <span class="token hvariable">condition</span> <span class="token punctuation">(</span><span class="token hvariable">window</span> <span class="token number">2</span> <span class="token operator">$</span> <span class="token number">0</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token number">1</span> <span class="token operator">:</span> <span class="token constant">Nat</span></code></pre></div><p>It is also pretty compact, with the <em>little</em> difference that the filter function provided must
deconstruct a Vector of type <strong>Vect 2 Integer</strong>, based on the arguments to the <em>window</em> function. That is, in your function you are forced to take the vector as a whole or deconstruct to exactly
the right size that is provided.</p><p>Why is all this interesting? Because it is sometimes plain <em>fun</em> to compare different programming
languages. They present to you different ways of thinking, different ways to express your intentions. One common theme is that conciseness comes when you get close to functional programming idioms. Also, before this post I didn&#x27;t think that you could actually expand upon the
Haskell type system, but you can. Alas, we also have to recognize the great popularity of languages like ruby. Reasoning with types requires much practice, but help you squash bugs before you even get to the runtime. Languages like javascript and ruby reward you quickly when you get your act together, but depend on decent documentation to get API usage right.</p><p>Hence, ruby is indeed expressive, but quite a few popular languages have learned to recreate that expressiveness with the possibilities that their respective runtimes provide.</p></article><nav class="PreviousAndNext-module--navigation--123UK"><a class="PreviousAndNext-module--linkPrevious--2WFha PreviousAndNext-module--link--iq7Ea" aria-describedby="previousTitle" href="/2017/05/15/rant-on-the-importance-of-education">&lt;</a><span id="previousTitle" class="PreviousAndNext-module--title--3-yUO">Rant on the importance of education</span><span id="nextTitle" class="PreviousAndNext-module--title--3-yUO PreviousAndNext-module--border--dT-B7">eleven year old svg engine, reposted</span><a class="PreviousAndNext-module--linkNext--3jMS3 PreviousAndNext-module--link--iq7Ea" aria-describedby="nextTitle" href="/2017/06/24/eleven-year-old-svg-engine-reposted">&gt;</a></nav></main><footer class="Footer-module--main--1QC0I"><a rel="license noopener noreferrer" target="_new" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"/></a><p>Frank Quednau <!-- -->2021</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  window.excludeGAPaths=[/^(?:\/404)$/];
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-1812710-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2017/05/22/each_cons-the-wise-and-tall-of-popular-languages";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-72b219bae196683411be.js"],"app":["/app-18c5db79b52bec877cad.js"],"component---src-pages-404-js":["/component---src-pages-404-js-65e0e6024a51ef90147e.js"],"component---src-pages-about-js":["/component---src-pages-about-js-938610e8d1e33912361f.js"],"component---src-pages-index-js":["/component---src-pages-index-js-af6f54d0700b918d2163.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-289c177ccd69332b3e3d.js"],"component---src-templates-article-template-js":["/component---src-templates-article-template-js-f04abf4d737cf958b9a2.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-1d9c79df7cff12c7ff91.js"]};/*]]>*/</script><script src="/polyfill-72b219bae196683411be.js" nomodule=""></script><script src="/component---src-templates-article-template-js-f04abf4d737cf958b9a2.js" async=""></script><script src="/commons-5ffe1f2bcdc9b9fa2a3d.js" async=""></script><script src="/app-18c5db79b52bec877cad.js" async=""></script><script src="/framework-75034fa8e3a9e81ff051.js" async=""></script><script src="/webpack-runtime-c0e9b35e2527e2b6d994.js" async=""></script></body></html>